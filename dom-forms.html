<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.css">
    <style>
        .container-bg {
            background-color: #eee;
        }
    </style>
</head>

<body>
    <script>
        var isFirst = false;
        var container = document.createElement('div');
        container.classList.add('container', 'container-bg', 'mt-5');

        var row = document.createElement('div');
        row.classList.add('row')

        var col1 = document.createElement('div');
        col1.setAttribute('class', 'col-3');

        var col2 = document.createElement('div');
        col2.setAttribute('class', 'col');

        var form = document.createElement('form');
        form.setAttribute('id', 'form');
        // form.setAttribute('autocomplete', 'off');
        form.setAttribute('onsubmit', 'data(event)');
        //first name
        var firstName = document.createElement('input');
        firstName.setAttribute('type', 'text');
        firstName.setAttribute('placeholder', 'First Name');
        firstName.setAttribute('class', 'form-control');
        firstName.setAttribute('id', 'first-name');
        firstName.setAttribute('name', 'first-name');
        form.appendChild(firstName);
        //last name
        var lastName = document.createElement('input');
        lastName.setAttribute('type', 'text');
        lastName.setAttribute('placeholder', 'Last Name');
        lastName.setAttribute('class', 'form-control');
        lastName.setAttribute('id', 'last-name');
        lastName.setAttribute('name', 'last-name');
        form.appendChild(lastName);
        //textarea
        var address = document.createElement('textarea');
        address.setAttribute('id', 'address');
        address.setAttribute('name', 'address');
        address.setAttribute('placeholder', 'Address');
        address.setAttribute('class', 'form-control');
        form.appendChild(address);
        //pincode
        var pinCode = document.createElement('input');
        pinCode.setAttribute('type', 'text');
        pinCode.setAttribute('id', 'pin-code');
        pinCode.setAttribute('name', 'pin-code');
        pinCode.setAttribute('placeholder', 'Pincode');
        pinCode.setAttribute('class', 'form-control');
        form.appendChild(pinCode);
        //gender-male
        var labelMale = document.createElement('label');
        var male = document.createElement('input');
        male.setAttribute('type', "radio");
        male.name = "gender";
        male.id = "male";
        male.value = "male";
        labelMale.innerText = 'Male';
        labelMale.appendChild(male);
        form.appendChild(labelMale);
        //gender-female
        var labelFemale = document.createElement('label');
        var female = document.createElement('input');
        female.name = "gender";
        female.id = "female";
        female.value = "female";
        female.type = "radio";
        labelFemale.innerText = 'Female';
        labelFemale.appendChild(female);
        form.appendChild(labelFemale);

        //select choice of food
        var formGroup = document.createElement('div');
        formGroup.classList.add('form-group');
        var foodLabel = document.createElement('label');
        foodLabel.for = 'select-food';
        foodLabel.innerText = 'Choice of Food';
        formGroup.appendChild(foodLabel);
        var selectFood = document.createElement('select')
        selectFood.setAttribute('class', 'custom-select');
        selectFood.setAttribute('id', 'select-food');
        selectFood.setAttribute('name', 'select-food');
        selectFood.multiple = true
        var foodOption1 = document.createElement('option');
        foodOption1.setAttribute('value', 'ROTI');
        foodOption1.innerText = 'Rotti';
        selectFood.appendChild(foodOption1);
        var foodOption2 = document.createElement('option');
        foodOption2.setAttribute('value', 'BY');
        foodOption2.innerText = 'Briyani';
        selectFood.appendChild(foodOption2);
        var foodOption3 = document.createElement('option');
        foodOption3.setAttribute('value', 'CR');
        foodOption3.innerText = 'Curd Rice';
        selectFood.appendChild(foodOption3);
        formGroup.appendChild(selectFood);
        form.appendChild(formGroup);

        //select country
        var selectState = document.createElement('select')
        selectState.setAttribute('class', 'custom-select');
        selectState.setAttribute('id', 'state');
        selectState.setAttribute('name', 'state');
        // selectState.multiple = true;
        var stateOption1 = document.createElement('option');
        stateOption1.setAttribute('value', 'TN');
        stateOption1.innerText = 'Tamil Nadu';
        selectState.appendChild(stateOption1);
        var stateOption2 = document.createElement('option');
        stateOption2.setAttribute('value', 'KA');
        stateOption2.innerText = 'Karnataka';
        selectState.appendChild(stateOption2);
        form.appendChild(selectState);

        var selectCountry = document.createElement('select')
        selectCountry.setAttribute('class', 'custom-select');
        selectCountry.setAttribute('id', 'country');
        selectCountry.setAttribute('name', 'country');
        // selectCountry.multiple = true;
        var option1 = document.createElement('option');
        option1.setAttribute('value', 'IN');
        option1.innerText = 'India';
        selectCountry.appendChild(option1);
        var option2 = document.createElement('option');
        option2.setAttribute('value', 'US');
        option2.innerText = 'United States';
        selectCountry.appendChild(option2);
        form.appendChild(selectCountry);

        var submit = document.createElement('button');
        submit.type = 'submit';
        submit.classList.add('btn', 'btn-primary');
        submit.innerText = 'Submit Data';
        form.appendChild(submit)
        col2.appendChild(form);
        var col3 = document.createElement('div');
        col3.setAttribute('class', 'col-3');

        row.appendChild(col1);
        row.appendChild(col2);
        row.appendChild(col3);
        container.appendChild(row)
        document.body.append(container);

        function data(event) {
            event.preventDefault();
            var name1 = document.getElementById('first-name').value;
            var name2 = document.getElementById('last-name').value;
            var addr = document.getElementById('address').value;
            var pinNo = document.getElementById('pin-code').value;
            var gender = document.querySelector('input[name="gender"]:checked').value;
            var foodChoice = document.getElementById('select-food');
            //method-2
            var foodValue = [...foodChoice.selectedOptions]
                .map(option => option.value);
            var state = document.getElementById('state').value;
            var country = document.getElementById('country').value;

            var data = {
                name1,
                name2,
                addr,
                pinNo,
                gender,
                foodValue,
                state,
                country
            }
            // console.log(name1, name2, addr, pinNo, gender, foodValue, countryValue);
            insertRecord(data);
            resetForm()
            //method-1
            // var selected = [...select.options]
            //     .filter(option => option.selected)
            //     .map(option => option.value);
            // console.log(selected)
        }

        function insertRecord(data) {
            console.log(data);
            var arrKeys = Object.keys(data);
            var arrData = Object.values(data);

            // console.log(Object.keys(data).length);
            // var tdCount = Object.keys(data).length;
            var table = document.createElement('table');
            table.classList.add('table');
            if (isFirst && arrKeys !== '' && arrData !== '') {
                var tBody = document.createElement('tbody');
                var tr = document.createElement('tr');
                for (let index = 0; index < arrData.length; index++) {
                    var td = document.createElement('td');
                    td.innerText = arrData[index];
                    tr.appendChild(td);
                }
                tBody.appendChild(tr);
                isFirst = false;
            } else {
                var thead = document.createElement('thead');
                var theadTR = document.createElement('tr');
                for (let index = 0; index < arrKeys.length; index++) {
                    var th = document.createElement('th');
                    th.innerText = arrKeys[index];
                    theadTR.appendChild(th)
                }
                thead.appendChild(theadTR);
                table.appendChild(thead);
                var tBody = document.createElement('tbody');
                var tr = document.createElement('tr');
                for (let index = 0; index < arrData.length; index++) {
                    var td = document.createElement('td');
                    td.innerText = arrData[index];
                    tr.appendChild(td);
                }
                tBody.appendChild(tr);
                isFirst = true;
            }

            table.appendChild(tBody);
            document.querySelector('div.container').appendChild(table);
        }

        function resetForm() {
            document.getElementById('form').reset()
        }


        // First name, last name, address, pincode, gender, food, state, country. 

    </script>
</body>

</html>
